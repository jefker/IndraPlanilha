<div class="background">
    <div class="grid">
        <div class="cabecalho col-6">
            <h2>Progresso dos Colaboradores</h2>
            <p>{{currentDate | date:'longDate':'pt-BR'}}</p>
        </div>
        
        <div class="metas col-6">
            <div class="numberCircle">{{metaAtingida}}</div>
            <p>Atingiram a meta</p>
            
            <div class="numberCircle">{{metaNaoAtingida}}</div>
            <p>Faltam atingir a meta</p>
        </div>
        
        <div class="colaboradores col-12">
            <p-table #dt2 [value]="usuario" dataKey="id" styleClass="p-datatable-customers" [rowHover]="true"
                [rows]="6" [showCurrentPageReport]="true" [loading]="loading" responsiveLayout="scroll"
                [paginator]="true" currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} colaboradores"
                [filterDelay]="0" [globalFilterFields]="['id','nome','rol','porcentagem']">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="id">
                            <div class="flex justify-content-between align-items-center">
                                ID
                                <!-- <p-sortIcon field="id"></p-sortIcon> -->
                                <!-- <p-columnFilter type="text" field="id" display="menu" class="ml-auto"></p-columnFilter> -->
                            </div>
                        </th>
                        <th pSortableColumn="nome">
                            <div class="flex justify-content-between align-items-center">
                                Nome
                                <!-- <p-sortIcon field="nome"></p-sortIcon> -->
                            </div>
                        </th>
                        <th pSortableColumn="rol">
                            <div class="flex justify-content-between align-items-center">
                                Rol
                                <!-- <p-sortIcon field="rol"></p-sortIcon> -->
                            </div>
                        </th>
                        <th pSortableColumn="porcentagem" >
                            <div class="flex justify-content-between align-items-center">
                                Porcentagem
                                <!-- <p-sortIcon field="porcentagem"></p-sortIcon> -->
                            </div>
                        </th>
                        <th pSortableColumn="porcentagem">
                            <div class="flex justify-content-between align-items-center">
                                Progresso
                                <!-- <p-sortIcon field="porcentagem"></p-sortIcon> -->
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-usuario>
                    <tr class="p-selectable-row" routerLink="{{usuario.id}}">
                        <td>
                            <span class="p-column-title">ID</span>
                            {{usuario.id}}
                        </td>
                        <td>
                            <span class="p-column-title">Nome</span>
                            {{usuario.nome}}
                        </td>
                        <td>
                            <span class="p-column-title">Rol</span>
                            {{usuario.rol}}
                        </td>
                        <td>
                            <span class="p-column-title">Porcentagem</span>
                            {{usuario.porcentagem}}%
                        </td>
                        <td>
                            <span class="p-column-title">Progresso</span>
                            <p-progressBar *ngIf="usuario.porcentagem == 100" [ngClass]="{'progressgreen': usuario.porcentagem == 100}"  [style]="{'height': '10px'}" [value]="usuario.porcentagem" [showValue]="false" ></p-progressBar>
                            <p-progressBar *ngIf="usuario.porcentagem < 100 && usuario.porcentagem>=30" [ngClass]="{'progressyellow': usuario.porcentagem >=30 && usuario.porcetagem != 100}" [style]="{'height': '10px'}" [value]="usuario.porcentagem" [showValue]="false" ></p-progressBar>
                            <p-progressBar *ngIf="usuario.porcentagem < 30" class="progressred" [style]="{'height': '10px'}" [value]="usuario.porcentagem" [showValue]="false" ></p-progressBar>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">Nenhum colaborador encontrado.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>